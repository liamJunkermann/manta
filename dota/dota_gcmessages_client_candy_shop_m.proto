syntax = "proto2";

package dota;
option go_package = "github.com/liamJunkermann/manta/dota;dota";

import "steammessages_m.proto";
import "dota_shared_enums_m.proto";
import "dota_gcmessages_common_m.proto";
import "dota_gcmessages_webapi_m.proto";
import "gcsdk_gcmessages_m.proto";
import "base_gcmessages_m.proto";
import "econ_gcmessages_m.proto";
import "dota_gcmessages_client_m.proto";
import "valveextensions_m.proto";

option optimize_for = SPEED;
option cc_generic_services = false;

enum ECandyShopAuditAction {
	k_eInvalid = 0;
	k_eSupportModify = 1;
	k_ePurchaseReward = 2;
	k_eOpenBags = 3;
	k_eRerollRewards = 4;
	k_eDoVariableExchange = 5;
	k_eDoExchange = 6;
	k_eEventActionGrantInventorySizeIncrease = 7;
	k_eEventActionGrantRerollChargesIncrease = 8;
}

enum ECandyShopRewardType {
	k_eCandyShopRewardType_None = 0;
	k_eCandyShopRewardType_Item = 1;
	k_eCandyShopRewardType_EventAction = 2;
	k_eCandyShopRewardType_EventPoints = 3;
}

message CMsgCandyShopCandyCount {
	optional uint32 candy_type = 1;
	optional uint32 candy_count = 2;
}

message CMsgCandyShopCandyQuantity {
	repeated CMsgCandyShopCandyCount candy_counts = 1;
}

message CMsgCandyShopExchangeRecipe {
	optional uint32 recipe_id = 1;
	optional CMsgCandyShopCandyQuantity input = 2;
	optional CMsgCandyShopCandyQuantity output = 3;
}

message CMsgCandyShopRewardData_Item {
	optional uint32 item_def = 1;
}

message CMsgCandyShopRewardData_EventAction {
	optional EEvent event_id = 1;
	optional uint32 action_id = 2;
	optional uint32 quantity = 3;
}

message CMsgCandyShopRewardData_EventPoints {
	optional EEvent event_id = 1;
	optional uint32 points = 2;
}

message CMsgCandyShopReward {
	optional uint32 reward_id = 1;
	optional uint32 reward_option_id = 2;
	optional CMsgCandyShopCandyQuantity price = 3;
	optional ECandyShopRewardType reward_type = 4;
	optional CMsgCandyShopRewardData_Item item_data = 5;
	optional CMsgCandyShopRewardData_EventAction event_action_data = 6;
	optional CMsgCandyShopRewardData_EventPoints event_points_data = 7;
}

message CMsgCandyShopUserData {
	optional uint32 inventory_size = 1;
	optional CMsgCandyShopCandyQuantity inventory = 2;
	optional fixed32 exchange_reset_timestamp = 3;
	repeated CMsgCandyShopExchangeRecipe exchange_recipes = 4;
	repeated CMsgCandyShopReward active_rewards = 5;
	optional uint32 reroll_charges = 6;
}

message CMsgClientToGCCandyShopGetUserData {
	optional uint32 candy_shop_id = 1;
}

message CMsgClientToGCCandyShopGetUserDataResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eInvalidShop = 5;
	}

	optional CMsgClientToGCCandyShopGetUserDataResponse.EResponse response = 1;
	optional CMsgCandyShopUserData user_data = 2;
}

message CMsgGCToClientCandyShopUserDataUpdated {
	optional uint32 candy_shop_id = 1;
	optional CMsgCandyShopUserData user_data = 2;
}

message CMsgClientToGCCandyShopPurchaseReward {
	optional uint32 candy_shop_id = 1;
	optional uint64 reward_id = 2;
}

message CMsgClientToGCCandyShopPurchaseRewardResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eInvalidShop = 5;
		k_eInvalidReward = 6;
		k_eNotEnoughCandy = 7;
	}

	optional CMsgClientToGCCandyShopPurchaseRewardResponse.EResponse response = 1;
}

message CMsgClientToGCCandyShopOpenBags {
	optional uint32 candy_shop_id = 1;
	optional uint32 bag_count = 2;
}

message CMsgClientToGCCandyShopOpenBagsResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eInvalidShop = 5;
		k_eInvalidItem = 6;
		k_eNotEnoughBags = 7;
		k_eNotEnoughSpace = 8;
	}

	optional CMsgClientToGCCandyShopOpenBagsResponse.EResponse response = 1;
}

message CMsgClientToGCCandyShopDoExchange {
	optional uint32 candy_shop_id = 1;
	optional uint32 recipe_id = 2;
}

message CMsgClientToGCCandyShopDoExchangeResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eInvalidShop = 5;
		k_eNotEnoughCandy = 6;
		k_eInvalidRecipe = 7;
		k_eNotEnoughSpace = 8;
	}

	optional CMsgClientToGCCandyShopDoExchangeResponse.EResponse response = 1;
}

message CMsgClientToGCCandyShopDoVariableExchange {
	optional uint32 candy_shop_id = 1;
	optional CMsgCandyShopCandyQuantity input = 2;
	optional CMsgCandyShopCandyQuantity output = 3;
}

message CMsgClientToGCCandyShopDoVariableExchangeResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eInvalidShop = 5;
		k_eNotEnoughCandy = 6;
		k_eInvalidRecipe = 7;
		k_eNotEnoughSpace = 8;
	}

	optional CMsgClientToGCCandyShopDoVariableExchangeResponse.EResponse response = 1;
}

message CMsgClientToGCCandyShopRerollRewards {
	optional uint32 candy_shop_id = 1;
}

message CMsgClientToGCCandyShopRerollRewardsResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eInvalidShop = 5;
		k_eNoRerollCharges = 6;
	}

	optional CMsgClientToGCCandyShopRerollRewardsResponse.EResponse response = 1;
}

message CMsgClientToGCCandyShopDevGrantCandy {
	optional uint32 candy_shop_id = 1;
	optional CMsgCandyShopCandyQuantity candy_quantity = 2;
}

message CMsgClientToGCCandyShopDevGrantCandyResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eNotAllowed = 5;
		k_eInvalidShop = 6;
		k_eNotEnoughSpace = 7;
	}

	optional CMsgClientToGCCandyShopDevGrantCandyResponse.EResponse response = 1;
}

message CMsgClientToGCCandyShopDevClearInventory {
	optional uint32 candy_shop_id = 1;
}

message CMsgClientToGCCandyShopDevClearInventoryResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eNotAllowed = 5;
		k_eInvalidShop = 6;
	}

	optional CMsgClientToGCCandyShopDevClearInventoryResponse.EResponse response = 1;
}

message CMsgClientToGCCandyShopDevGrantCandyBags {
	optional uint32 candy_shop_id = 1;
	optional uint32 quantity = 2;
}

message CMsgClientToGCCandyShopDevGrantCandyBagsResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eNotAllowed = 5;
		k_eInvalidShop = 6;
	}

	optional CMsgClientToGCCandyShopDevGrantCandyBagsResponse.EResponse response = 1;
}

message CMsgClientToGCCandyShopDevShuffleExchange {
	optional uint32 candy_shop_id = 1;
}

message CMsgClientToGCCandyShopDevShuffleExchangeResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eNotAllowed = 5;
		k_eInvalidShop = 6;
	}

	optional CMsgClientToGCCandyShopDevShuffleExchangeResponse.EResponse response = 1;
}

message CMsgClientToGCCandyShopDevGrantRerollCharges {
	optional uint32 candy_shop_id = 1;
	optional uint32 reroll_charges = 2;
}

message CMsgClientToGCCandyShopDevGrantRerollChargesResponse {
	enum EResponse {
		k_eInternalError = 0;
		k_eSuccess = 1;
		k_eTooBusy = 2;
		k_eDisabled = 3;
		k_eTimeout = 4;
		k_eNotAllowed = 5;
		k_eInvalidShop = 6;
	}

	optional CMsgClientToGCCandyShopDevGrantRerollChargesResponse.EResponse response = 1;
}
